---
layout: post
title:  "Baixando Dados Científicos da Scimagojr"
author: Econometrick Patrick
date:   2017-07-09 14:36:23
permalink: /downloaddata-post.html
markdown: kramdown
kramdown:
  input: GFM  
---


  # Baixando Dados da Internet

:::
1. Download de arquivos EXCEL da internet.
2. Importação de arquivos EXCEL.
3. Junção (*append*) de bases de dados no R.
:::


## Introdução

Neste *post* vamos trabalhar com dados do portal _Scimagojr_. O portal é um recurso de avaliação científica para comparar universidades e instituições de pesquisa em todo o mundo. Por exemplo, o indicador SJR (*SCImago Journal Rank*) é uma medida de influência científica de periódicos acadêmicos que explica o número de citações recebidas por um jornal e seu prestígio entre as demais revistas. 

![Site de Indicadores Científicos.](https://github.com/econometrick/econometrick.github.io/blob/master/images/scimagojr.jpg)

Ao clicar em _Download data_ o arquivo EXCEL contendo os indicadores são salvos na pasta de _download_ da sua máquina.

![Copiando endereço do arquivo.](https://github.com/econometrick/econometrick.github.io/blob/master/images/copiar%20endereco.png)

## Download dos Indicadores no R!

Você pode programar o R para baixar diretamente as informações utilizando a biblioteca *httr*! :satisfied:


```pyhton
install.packages("httr")
library('httr')
url <- 'http://www.scimagojr.com/countryrank.php?year=2015&out=xls'
POST(url,write_disk("C:/Users/Patrick/Documents/scimagojr2015.xls"))
```
- O comando POST "entra" no seu browser o seguinte link: http://www.scimagojr.com/countryrank.php?year=2015&out=xls
- O argumento *write_disk* grava no disco o arquivo scimagojr2015.xls.

OBS: Você deverá modificar o caminho **C:/Users/Patrick/Documents/** para a pasta correspondente na sua máquina. 

## Download dos Indicadores através de Loop!

Como estamos interessados em organizar um *data.frame* contendo os indicadores para vários anos, vamos aproveitar a funcionalidade dos _loops_.


```
#Fazendo o download do site através de loop!
for (ano in 2012:2016) {
    site  <- "http://www.scimagojr.com/countryrank.php?year="
    site2 <-  paste(site , ano ,"&out=xls", sep="")
    print(site2)
    way = "C:/Learning/Econometric/scimagojr"
    way2 <- paste(way , ano ,".xlsx", sep="")
    Sys.sleep(1)
    POST(site2,write_disk(way2))
    print(way2)
}
```

O comando *paste* faz a colagem do caminho "http://www.scimagojr.com/countryrank.php?year=" junto com os anos (2012 a 2016) e o complemento "&out=xls". Fazemos uso do comando *paste* duas vezes, uma vez para compor o nome completo do site e uma segunda vez para compor o caminho local onde os arquivos serão salvos (*C:/Learning/Econometric/scimagojr*). 

Finalmente dentro do *loop* fazemos a chamada do comando *POST* para acessar os endereços *site2* e salvar os arquivos EXCEL em *way2*.




## Leitura dos Dados EXCEL no R!

Agora vamos fazer a leitura de dados no R e criar um *data.frame* com os indicadores cientíricos ao longo do tempo. Vamos começar com a boblioteca xlsx.

```
EXP<-read.csv("C:/Econometria/Dados/EXP_2013_MUN.csv")
```

Vamos dar uma olhada no data frame EXP.



Fazer o download da programação R aqui.

<span class="image featured"><img src="http://miriadna.com/desctopwalls/images/max/Mountain-from-the-sand.jpg" alt=""></span>
